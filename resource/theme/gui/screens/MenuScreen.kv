#:kivy 2.2.1
#:import dp kivy.metrics.dp

<MenuScreen>:
    MDBoxLayout:
        orientation: "vertical"

        AppToolbar:
            title: root.t("menu.title")

        MDBoxLayout:
            orientation: "vertical"
            adaptive_height: True
            size_hint_y: None
            height: self.minimum_height

            MDCard:
                orientation: "horizontal"
                padding: dp(16)
                spacing: dp(12)
                size_hint_y: None
                height: dp(72) if root.show_migration_banner else 0
                opacity: 1 if root.show_migration_banner else 0
                disabled: not root.show_migration_banner
                radius: [0, 0, 0, 0]
                md_bg_color: (0.16, 0.27, 0.44, 1)

                MDLabel:
                    text: root.migration_message
                    theme_text_color: "Custom"
                    text_color: (1, 1, 1, 1)
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDIconButton:
                    icon: "close"
                    theme_text_color: "Custom"
                    text_color: (1, 1, 1, 1)
                    on_release: root.dismiss_migration_message()

        MDScrollView:
            MDBoxLayout:
                orientation: "vertical"
                padding: (dp(24), dp(24), dp(24), dp(32))
                spacing: dp(24)
                size_hint_y: None
                height: self.minimum_height

                MenuHeroCard:
                    parent_screen: root
                    hero_title: root.t("menu.hero_title")
                    hero_body: root.t("menu.hero_body")
                    primary_text: root.t("menu.primary_action")
                    secondary_text: root.t("menu.secondary_action")
                    on_primary: lambda screen, *_: screen.change_screen("match_setup")
                    on_secondary: lambda screen, *_: screen.change_screen("stats")

                RecycleView:
                    viewclass: "MenuOptionCard"
                    data: root.menu_data

                    RecycleBoxLayout:
                        default_size: None, dp(180)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: "vertical"
                        spacing: dp(16)

                MDLabel:
                    text: root.t("common.version")
                    halign: "center"
                    theme_text_color: "Hint"
                    size_hint_y: None
                    height: dp(24)
