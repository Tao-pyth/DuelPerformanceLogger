<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Duel Performance Logger</title>
    <link rel="stylesheet" href="static/css/main.css" />
    <script type="text/javascript" src="/eel.js"></script>
    <script type="module" src="static/js/app.js" defer></script>
  </head>
  <body>
    <header class="app-header">
      <div class="app-header__titles">
        <h1>Duel Performance Logger</h1>
        <p class="app-header__subtitle"></p>
      </div>
      <div class="app-header__status">
        <span id="app-version">DPL.?.?.?</span>
        <button id="refresh-button" type="button">最新の状態を取得</button>
      </div>
    </header>

    <main class="app-main">
      <section class="view view--active" data-view="dashboard">
        <div class="view__content dashboard-grid">
          <section class="panel" aria-labelledby="migration-title">
            <h2 id="migration-title">移行結果</h2>
            <p id="migration-result" class="panel__body panel__body--muted">
              初期化処理の結果はまだ取得されていません。
            </p>
          </section>

          <section class="panel" aria-labelledby="summary-title">
            <h2 id="summary-title">データサマリー</h2>
            <dl class="summary-grid">
              <div>
                <dt>デッキ数</dt>
                <dd id="deck-count">0</dd>
              </div>
              <div>
                <dt>シーズン数</dt>
                <dd id="season-count">0</dd>
              </div>
              <div>
                <dt>対戦ログ数</dt>
                <dd id="match-count">0</dd>
              </div>
              <div>
                <dt>UI モード</dt>
                <dd id="ui-mode">normal</dd>
              </div>
            </dl>
          </section>

          <section class="panel" aria-labelledby="navigation-title">
            <h2 id="navigation-title">メニュー</h2>
            <div class="action-grid">
              <button type="button" class="nav-button" data-nav-target="deck-registration">
                デッキ情報を登録
              </button>
              <button
                type="button"
                class="nav-button"
                data-nav-target="opponent-deck-registration"
              >
                対戦相手デッキを登録
              </button>
              <button type="button" class="nav-button" data-nav-target="match-start">
                対戦情報の登録を開始
              </button>
              <button type="button" class="nav-button" data-nav-target="settings">
                設定
              </button>
            </div>
          </section>

          <section class="panel" aria-labelledby="recent-matches-title">
            <h2 id="recent-matches-title">最新の対戦ログ</h2>
            <table class="data-table" id="matches-table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">デッキ</th>
                  <th scope="col">相手デッキ</th>
                  <th scope="col">ターン</th>
                  <th scope="col">結果</th>
                  <th scope="col">記録時刻</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="6" class="data-table__empty">まだデータがありません。</td>
                </tr>
              </tbody>
            </table>
          </section>
        </div>
      </section>

      <section class="view" data-view="deck-registration" hidden>
        <div class="view__content stack">
          <section class="panel" aria-labelledby="deck-registration-title">
            <h2 id="deck-registration-title">デッキ情報登録</h2>
            <form id="deck-form" class="form-grid">
              <label class="form-field">
                <span>デッキ名</span>
                <input type="text" id="deck-name" name="name" required maxlength="120" />
              </label>
              <label class="form-field">
                <span>説明</span>
                <textarea
                  id="deck-description"
                  name="description"
                  rows="3"
                  maxlength="400"
                ></textarea>
              </label>
              <div class="form-actions">
                <button type="submit" class="primary-button">登録する</button>
              </div>
            </form>
          </section>

          <section class="panel" aria-labelledby="deck-list-title">
            <h3 id="deck-list-title">登録済みデッキ</h3>
            <table class="data-table" id="deck-table">
              <thead>
                <tr>
                  <th scope="col">デッキ名</th>
                  <th scope="col">説明</th>
                  <th scope="col">使用回数</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="3" class="data-table__empty">まだデータがありません。</td>
                </tr>
              </tbody>
            </table>
          </section>
        </div>
        <div class="view-actions">
          <button type="button" class="nav-button" data-nav="home">トップページへ戻る</button>
        </div>
      </section>

      <section class="view" data-view="opponent-deck-registration" hidden>
        <div class="view__content stack">
          <section class="panel" aria-labelledby="opponent-registration-title">
            <h2 id="opponent-registration-title">対戦相手デッキ登録</h2>
            <form id="opponent-deck-form" class="form-grid">
              <label class="form-field">
                <span>デッキ名</span>
                <input
                  type="text"
                  id="opponent-deck-name"
                  name="name"
                  required
                  maxlength="120"
                />
              </label>
              <div class="form-actions">
                <button type="submit" class="primary-button">登録する</button>
              </div>
            </form>
          </section>

          <section class="panel" aria-labelledby="opponent-deck-list-title">
            <h3 id="opponent-deck-list-title">登録済み対戦相手デッキ</h3>
            <table class="data-table" id="opponent-deck-table">
              <thead>
                <tr>
                  <th scope="col">デッキ名</th>
                  <th scope="col">使用回数</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="2" class="data-table__empty">まだデータがありません。</td>
                </tr>
              </tbody>
            </table>
          </section>
        </div>
        <div class="view-actions">
          <button type="button" class="nav-button" data-nav="home">トップページへ戻る</button>
        </div>
      </section>

      <section class="view" data-view="match-start" hidden>
        <div class="view__content stack">
          <section class="panel" aria-labelledby="match-start-title">
            <h2 id="match-start-title">対戦情報登録開始</h2>
            <p class="panel__body panel__body--muted">
              登録したデッキから今回使用するデッキを選択してください。
            </p>
            <form id="match-start-form" class="form-grid">
              <label class="form-field">
                <span>使用するデッキ</span>
                <select id="match-start-deck" name="deck_name" required>
                  <option value="" selected>デッキを選択...</option>
                </select>
              </label>
              <div class="form-actions">
                <button type="submit" class="primary-button">対戦情報登録へ</button>
              </div>
            </form>
          </section>

          <section class="panel" aria-labelledby="match-start-hint-title">
            <h3 id="match-start-hint-title">ヒント</h3>
            <p class="panel__body panel__body--muted">
              対戦相手デッキが登録されていない場合は、先に「対戦相手デッキ登録」画面で追加してください。
            </p>
          </section>
        </div>
        <div class="view-actions">
          <button type="button" class="nav-button" data-nav="home">トップページへ戻る</button>
        </div>
      </section>

      <section class="view" data-view="match-entry" hidden>
        <div class="view__content stack">
          <section class="panel" aria-labelledby="match-entry-title">
            <h2 id="match-entry-title">対戦情報登録</h2>
            <dl class="info-list">
              <div>
                <dt>使用デッキ</dt>
                <dd id="match-entry-deck-name">-</dd>
              </div>
              <div>
                <dt>次の対戦番号</dt>
                <dd id="match-entry-number">-</dd>
              </div>
              <div>
                <dt>記録時刻</dt>
                <dd id="match-entry-timestamp">-</dd>
              </div>
            </dl>
            <form id="match-entry-form" class="form-grid">
              <fieldset class="form-field">
                <legend>先攻 / 後攻</legend>
                <div class="option-row">
                  <label>
                    <input type="radio" name="turn" value="first" required />
                    先攻
                  </label>
                  <label>
                    <input type="radio" name="turn" value="second" required />
                    後攻
                  </label>
                </div>
              </fieldset>

              <label class="form-field">
                <span>対戦相手デッキ</span>
                <select id="match-opponent" name="opponent_deck" required>
                  <option value="" selected>対戦相手デッキを選択...</option>
                </select>
              </label>

              <fieldset class="form-field">
                <legend>勝敗</legend>
                <div class="option-row">
                  <label>
                    <input type="radio" name="result" value="1" required />
                    勝ち
                  </label>
                  <label>
                    <input type="radio" name="result" value="-1" required />
                    負け
                  </label>
                  <label>
                    <input type="radio" name="result" value="0" required />
                    引き分け
                  </label>
                </div>
              </fieldset>

              <div class="form-actions">
                <button type="submit" class="primary-button">対戦情報を登録</button>
              </div>
            </form>
          </section>
        </div>
        <div class="view-actions">
          <button type="button" class="nav-button" data-nav="back">ひとつ前の画面に戻る</button>
          <button type="button" class="nav-button" data-nav="home">トップページへ戻る</button>
        </div>
      </section>

      <section class="view" data-view="settings" hidden>
        <div class="view__content stack">
          <section class="panel" aria-labelledby="settings-title">
            <h2 id="settings-title">設定</h2>
            <p class="panel__body">
              アプリケーションの基本情報や利用状況を確認できます。データベースのバックアップやリストアは今後のバージョンで提供予定です。
            </p>
            <dl class="info-list">
              <div>
                <dt>現在の UI モード</dt>
                <dd id="settings-ui-mode">-</dd>
              </div>
              <div>
                <dt>前回の移行メッセージ</dt>
                <dd id="settings-migration">-</dd>
              </div>
            </dl>
          </section>
        </div>
        <div class="view-actions">
          <button type="button" class="nav-button" data-nav="home">トップページへ戻る</button>
        </div>
      </section>
    </main>

    <div id="toast" role="status" aria-live="polite" hidden></div>
  </body>
</html>
